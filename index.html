<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CT Fair Rent Commission Case Prep Tool</title>
    <!-- PDF Generation Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        color: #333;
    }

    .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
    }

    .header {
        text-align: center;
        margin-bottom: 30px;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        padding: 20px;
        border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .header h1 {
        color: white;
        font-size: 2.5em;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }

    .header p {
        color: rgba(255, 255, 255, 0.9);
        font-size: 1.2em;
    }

    .main-content {
        display: grid;
        grid-template-columns: 1fr 2fr;
        gap: 20px;
        margin-bottom: 30px;
    }

    .sidebar {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 15px;
        padding: 20px;
        box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .main-panel {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .nav-btn {
        display: block;
        width: 100%;
        padding: 15px;
        margin: 10px 0;
        border: none;
        border-radius: 10px;
        background: linear-gradient(45deg, #667eea, #764ba2);
        color: white;
        font-size: 16px;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .nav-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }

    .nav-btn.active {
        background: linear-gradient(45deg, #764ba2, #667eea);
        transform: scale(1.05);
    }

    .section {
        display: none;
    }

    .section.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .form-group {
        margin-bottom: 20px;
    }

    label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
        color: #555;
    }

    input, textarea, select {
        width: 100%;
        padding: 12px;
        border: 2px solid #ddd;
        border-radius: 8px;
        font-size: 16px;
        transition: border-color 0.3s ease;
    }

    input:focus, textarea:focus, select:focus {
        outline: none;
        border-color: #667eea;
    }

    textarea {
        resize: vertical;
        min-height: 100px;
    }

    .btn {
        background: linear-gradient(45deg, #667eea, #764ba2);
        color: white;
        padding: 12px 24px;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }

    .checklist {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
        margin: 20px 0;
    }

    .checklist-item {
        display: flex;
        align-items: center;
        margin: 10px 0;
        padding: 10px;
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .checklist-item input[type="checkbox"] {
        width: auto;
        margin-right: 10px;
    }

    .progress-bar {
        background: #e0e0e0;
        height: 20px;
        border-radius: 10px;
        overflow: hidden;
        margin: 20px 0;
    }

    .progress-fill {
        height: 100%;
        background: linear-gradient(45deg, #667eea, #764ba2);
        transition: width 0.3s ease;
    }

    .alert {
        padding: 15px;
        margin: 20px 0;
        border-radius: 8px;
        border-left: 4px solid #667eea;
        background: #e8f4ff;
    }

    .timeline {
        position: relative;
        margin: 20px 0;
    }

    .timeline-item {
        position: relative;
        padding: 20px;
        margin: 10px 0;
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        border-left: 4px solid #667eea;
    }

    .document-list {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
        margin: 20px 0;
    }

    .document-item {
        padding: 15px;
        margin: 10px 0;
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .status-badge {
        padding: 5px 10px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: bold;
    }

    .status-needed {
        background: #ffebee;
        color: #c62828;
    }

    .status-uploaded {
        background: #e8f5e8;
        color: #2e7d32;
    }

    @media (max-width: 768px) {
        .main-content {
            grid-template-columns: 1fr;
        }
        
        .header h1 {
            font-size: 2em;
        }
    }
</style>
```

</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Connecticut Fair Rent Commission Case Prep Tool</h1>
            <p>Comprehensive case preparation for tenant rent disputes</p>
        </div>

        <div class="main-content">
            <div class="sidebar">
                <h3>FRC Case Builder</h3>
                <button class="nav-btn active" onclick="showSection('basics')">1. Case Information</button>
                <button class="nav-btn" onclick="showSection('financial')">2. Financial Impact</button>
                <button class="nav-btn" onclick="showSection('evidence')">3. Evidence & Timeline</button>
                <button class="nav-btn" onclick="showSection('market')">4. Market Analysis</button>
                <button class="nav-btn" onclick="showSection('filing')">5. Generate FRC Filing</button>
                <button class="nav-btn" onclick="showSection('resources')">6. Resources</button>
                
                <div style="margin-top: 30px;">
                    <h4>Filing Progress</h4>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressBar" style="width: 0%"></div>
                    </div>
                    <p id="progressText">0% Complete</p>
                </div>
            </div>

            <div class="main-panel">
                <!-- Case Information Section -->
                <div id="basics" class="section active">
                    <h2>Case Information</h2>
                    <div class="alert">
                        <strong>Fair Rent Commission Filing:</strong> Provide basic case details that will be included in your official FRC submission.
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div>
                            <div class="form-group">
                                <label for="tenantName">Your Full Name</label>
                                <input type="text" id="tenantName" placeholder="Enter your full legal name">
                            </div>
                            
                            <div class="form-group">
                                <label for="propertyAddress">Rental Property Address</label>
                                <input type="text" id="propertyAddress" placeholder="Full address including city, state, zip">
                            </div>
                            
                            <div class="form-group">
                                <label for="landlordName">Landlord/Management Company</label>
                                <input type="text" id="landlordName" placeholder="Full name of landlord or company">
                            </div>
                        </div>
                        
                        <div>
                            <div class="form-group">
                                <label for="currentRent">Current Monthly Rent</label>
                                <input type="number" id="currentRent" placeholder="1200" step="0.01">
                            </div>
                            
                            <div class="form-group">
                                <label for="proposedRent">Proposed New Rent</label>
                                <input type="number" id="proposedRent" placeholder="1500" step="0.01">
                            </div>
                            
                            <div class="form-group">
                                <label for="rentIncreaseDate">Effective Date of Increase</label>
                                <input type="date" id="rentIncreaseDate">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="caseType">Primary Basis for Challenge</label>
                        <select id="caseType">
                            <option value="">Select the main reason for challenging this increase</option>
                            <option value="excessive_increase">Rent increase is excessive/unreasonable</option>
                            <option value="financial_hardship">Creates severe financial hardship</option>
                            <option value="market_disparity">Above-market rent for comparable properties</option>
                            <option value="property_condition">Property condition doesn't justify increase</option>
                            <option value="retaliation">Retaliatory rent increase</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="caseSummary">Brief Summary of Your Challenge</label>
                        <textarea id="caseSummary" placeholder="In 2-3 sentences, explain why you believe this rent increase should be reduced or denied..." rows="3"></textarea>
                    </div>
                    
                    <button class="btn" onclick="saveBasics()">Continue to Financial Analysis</button>
                </div>

                <!-- Financial Impact Section -->
                <div id="financial" class="section">
                    <h2>Financial Impact Analysis</h2>
                    <div class="alert">
                        <strong>Financial Hardship:</strong> This analysis demonstrates the impact of the rent increase on your household budget and will be included in your FRC filing.
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div>
                            <div class="form-group">
                                <label for="monthlyIncome">Total Monthly Household Income (before taxes)</label>
                                <input type="number" id="monthlyIncome" placeholder="4000" step="0.01">
                                <small>Include all income sources: wages, benefits, etc.</small>
                            </div>
                            
                            <div class="form-group">
                                <label for="householdSize">Number of People in Household</label>
                                <input type="number" id="householdSize" placeholder="2" min="1">
                            </div>
                        </div>
                        
                        <div>
                            <div class="form-group">
                                <label for="otherMajorExpenses">Other Major Monthly Expenses</label>
                                <input type="number" id="otherMajorExpenses" placeholder="1500" step="0.01">
                                <small>Utilities, food, transportation, medical, debt payments, etc.</small>
                            </div>
                            
                            <div class="form-group">
                                <label for="specialCircumstances">Special Financial Circumstances</label>
                                <select id="specialCircumstances">
                                    <option value="">None</option>
                                    <option value="fixed_income">Fixed income (Social Security, disability, pension)</option>
                                    <option value="medical_expenses">High medical expenses</option>
                                    <option value="job_loss">Recent job loss or reduced hours</option>
                                    <option value="student">Student with limited income</option>
                                    <option value="senior">Senior citizen on limited income</option>
                                    <option value="family_emergency">Family emergency/unexpected expenses</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Financial Analysis Results -->
                    <div id="financialAnalysisResults" style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 10px; display: none;">
                        <h3>Financial Impact Summary</h3>
                        <div id="financialAnalysisContent"></div>
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <button class="btn" onclick="analyzeFinancialImpact()">Analyze Financial Impact</button>
                    </div>
                </div>

                <!-- Evidence & Timeline Section -->
                <div id="evidence" class="section">
                    <h2>Evidence & Timeline</h2>
                    <div class="alert">
                        <strong>Supporting Evidence:</strong> Upload key documents and create a timeline of events for your FRC filing.
                    </div>
                    
                    <h3>Required Documents</h3>
                    <div class="document-list">
                        <div class="document-item">
                            <div>
                                <strong>Current Lease Agreement</strong>
                                <p>Shows current rent terms and lease conditions</p>
                            </div>
                            <div>
                                <span class="status-badge status-needed" id="lease-status">Required</span>
                                <input type="file" id="lease-file" style="display: none;" onchange="updateDocStatus('lease')" accept=".pdf,.jpg,.jpeg,.png,.doc,.docx">
                                <button class="btn" onclick="document.getElementById('lease-file').click()">Upload</button>
                            </div>
                        </div>
                        
                        <div class="document-item">
                            <div>
                                <strong>Rent Increase Notice</strong>
                                <p>Official notice from landlord about the rent increase</p>
                            </div>
                            <div>
                                <span class="status-badge status-needed" id="notice-status">Required</span>
                                <input type="file" id="notice-file" style="display: none;" onchange="updateDocStatus('notice')" accept=".pdf,.jpg,.jpeg,.png,.doc,.docx">
                                <button class="btn" onclick="document.getElementById('notice-file').click()">Upload</button>
                            </div>
                        </div>
                        
                        <div class="document-item">
                            <div>
                                <strong>Proof of Income</strong>
                                <p>Pay stubs, benefits statements, or tax returns</p>
                            </div>
                            <div>
                                <span class="status-badge status-needed" id="income-status">Recommended</span>
                                <input type="file" id="income-file" style="display: none;" onchange="updateDocStatus('income')" accept=".pdf,.jpg,.jpeg,.png,.doc,.docx">
                                <button class="btn" onclick="document.getElementById('income-file').click()">Upload</button>
                            </div>
                        </div>
                    </div>
                    
                    <h3 style="margin-top: 30px;">Timeline of Events</h3>
                    <p>Create a chronological record of important events related to this case.</p>
                    
                    <div style="display: grid; grid-template-columns: 200px 1fr 120px; gap: 15px; margin: 20px 0;">
                        <div>
                            <label for="eventDate">Date</label>
                            <input type="date" id="eventDate">
                        </div>
                        <div>
                            <label for="eventDescription">Event Description</label>
                            <input type="text" id="eventDescription" placeholder="e.g., Received rent increase notice">
                        </div>
                        <div style="display: flex; align-items: end;">
                            <button class="btn" onclick="addTimelineEvent()">Add Event</button>
                        </div>
                    </div>
                    
                    <div class="timeline" id="timelineContainer">
                        <!-- Timeline events will be added here -->
                    </div>
                </div>

                <!-- Market Analysis Section -->
                <div id="market" class="section">
                    <h2>Market Analysis</h2>
                    <div class="alert">
                        <strong>Comparable Rent Analysis:</strong> Research similar properties to demonstrate if your proposed rent is above market rate.
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                        <div class="form-group">
                            <label for="propertyType">Property Type</label>
                            <select id="propertyType">
                                <option value="">Select type</option>
                                <option value="apartment">Apartment</option>
                                <option value="house">Single Family House</option>
                                <option value="condo">Condominium</option>
                                <option value="townhouse">Townhouse</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="bedrooms">Bedrooms</label>
                            <select id="bedrooms">
                                <option value="">Select bedrooms</option>
                                <option value="0">Studio</option>
                                <option value="1">1 Bedroom</option>
                                <option value="2">2 Bedrooms</option>
                                <option value="3">3 Bedrooms</option>
                                <option value="4">4+ Bedrooms</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="searchRadius">Search Area</label>
                            <select id="searchRadius">
                                <option value="1">1 mile radius</option>
                                <option value="2">2 mile radius</option>
                                <option value="5">5 mile radius</option>
                            </select>
                        </div>
                    </div>
                    
                    <button class="btn" onclick="searchComparableRents()">🔍 Find Comparable Properties</button>
                    
                    <div id="marketAnalysisResults" style="display: none; margin-top: 20px; padding: 20px; background: #f8f9fa; border-radius: 10px;">
                        <h3>Market Analysis Results</h3>
                        <div id="marketAnalysisContent"></div>
                    </div>
                    
                    <div class="form-group" style="margin-top: 30px;">
                        <label for="additionalComparables">Additional Comparable Properties (Optional)</label>
                        <textarea id="additionalComparables" placeholder="If you've found other comparable properties, list them here with addresses and rent amounts..." rows="4"></textarea>
                    </div>
                </div>

                <!-- FRC Filing Generation Section -->
                <div id="filing" class="section">
                    <h2>Generate Fair Rent Commission Filing</h2>
                    <div class="alert">
                        <strong>Professional FRC Submission:</strong> Generate a comprehensive report that can be filed directly with your Fair Rent Commission.
                    </div>
                    
                    <div class="form-group">
                        <label for="reliefRequested">Relief Requested from FRC</label>
                        <select id="reliefRequested">
                            <option value="">Select the outcome you're seeking</option>
                            <option value="deny_increase">Deny the rent increase entirely</option>
                            <option value="reduce_increase">Reduce the rent increase to a reasonable amount</option>
                            <option value="delay_increase">Delay the effective date of the increase</option>
                            <option value="rollback_rent">Roll back rent to previous amount</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="additionalArguments">Additional Arguments or Special Circumstances</label>
                        <textarea id="additionalArguments" placeholder="Any additional points you want to emphasize in your filing..." rows="4"></textarea>
                    </div>
                    
                    <div style="margin-top: 30px;">
                        <button class="btn" onclick="generateFRCFiling()" style="font-size: 18px; padding: 15px 30px;">📋 Generate FRC Filing Report</button>
                    </div>
                    
                    <div id="frcFilingOutput" style="display: none; margin-top: 30px; padding: 30px; background: #f8f9fa; border-radius: 10px; border: 2px solid #667eea;">
                        <h3>Fair Rent Commission Filing Report</h3>
                        <div class="alert" style="background: #e8f5e8; border-color: #4caf50;">
                            <strong>Ready to File:</strong> This report is formatted for submission to your Fair Rent Commission and includes all required analysis and supporting evidence.
                        </div>
                        <div id="frcFilingContent"></div>
                        <div style="margin-top: 25px; text-align: center;">
                            <button class="btn" onclick="downloadFRCFilingPDF()" style="background: linear-gradient(45deg, #4caf50, #45a049); font-size: 16px; padding: 12px 25px; margin-right: 15px;">📄 Download PDF Filing</button>
                            <button class="btn" onclick="printFRCFiling()" style="background: linear-gradient(45deg, #2196f3, #1976d2); font-size: 16px; padding: 12px 25px;">🖨️ Print Filing</button>
                        </div>
                    </div>
                </div>

                <!-- Resources Section -->
                <div id="resources" class="section">
                    <h2>Fair Rent Commission Resources</h2>
                    
                    <div class="alert">
                        <strong>Next Steps:</strong> After generating your filing report, submit it to your local Fair Rent Commission along with your uploaded documents.
                    </div>
                    
                    <h3>Connecticut Towns with Fair Rent Commissions</h3>
                    <div class="document-list">
                        <div class="document-item">
                            <div>
                                <strong>Bridgeport Fair Rent Commission</strong>
                                <p>City Hall, 45 Lyon Terrace, Bridgeport, CT 06604</p>
                            </div>
                            <div>
                                <a href="https://www.bridgeportct.gov" target="_blank" class="btn">Contact Info</a>
                            </div>
                        </div>
                        <div class="document-item">
                            <div>
                                <strong>Hartford Fair Rent Commission</strong>
                                <p>City Hall, 550 Main Street, Hartford, CT 06103</p>
                            </div>
                            <div>
                                <a href="https://www.hartford.gov" target="_blank" class="btn">Contact Info</a>
                            </div>
                        </div>
                        <div class="document-item">
                            <div>
                                <strong>New Haven Fair Rent Commission</strong>
                                <p>City Hall, 165 Church Street, New Haven, CT 06510</p>
                            </div>
                            <div>
                                <a href="https://www.newhavenct.gov" target="_blank" class="btn">Contact Info</a>
                            </div>
                        </div>
                    </div>
                    
                    <h3>Filing Process</h3>
                    <div class="timeline">
                        <div class="timeline-item">
                            <strong>Step 1: Complete This Tool</strong>
                            <p>Gather all information and generate your filing report.</p>
                        </div>
                        <div class="timeline-item">
                            <strong>Step 2: Submit to FRC</strong>
                            <p>File your report and documents with your local Fair Rent Commission within required timeframe (usually 30 days).</p>
                        </div>
                        <div class="timeline-item">
                            <strong>Step 3: FRC Review</strong>
                            <p>Commission staff reviews your filing and may request additional information.</p>
                        </div>
                        <div class="timeline-item">
                            <strong>Step 4: Hearing & Decision</strong>
                            <p>Attend public hearing before FRC board and receive written decision.</p>
                        </div>
                    </div>
                    
                    <div class="alert" style="margin-top: 30px;">
                        <strong>Legal Disclaimer:</strong> This tool provides general information and document generation assistance. For specific legal advice, consult with a qualified attorney familiar with Connecticut fair rent laws.
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
